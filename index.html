<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="styles.css">
    <title>Elkube</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body>
    <h1>Site en construction</h1>
    <h1>Elkube</h1>
    <h2>Statut du serveur Minecraft</h2>
    <p id="status">Chargement des informations du serveur...</p>
    <button onclick="checkServerStatus">Raffraichir</button>

    <h2>Nos gameplays</h2>
    <section>
        <div class="bulleinfo" align="left"><h3>BedWars</h3></div>
        <div class="bulleinfo" align="left"><h3>OneBlock</h3></div>
        <div class="bulleinfo" align="left"><h3>SMP avec magie</h3></div>
    </section>

    <script>
        $(document).ready(function(){
            function checkServerStatus() {
                $.ajax({
                    url: "https://api.mcsrvstat.us/2/n1.recloud-hosting.me:1122", 
                    type: "GET",
                    dataType: "json",
                    success: function(response) {
                        if(response.online) {
                            $("#status").text("Le serveur est en ligne - Joueurs en ligne : " + response.players.online);
                            $("#status").css("background-color", " rgb(0, 211, 95)");
                        } else {
                            $("#status").text("Le serveur est hors ligne");
                            $("#status").css("background-color", "rgb(247, 0, 0)");
                        }
                    },
                    error: function() {
                        $("#error").text("Impossible de récupérer le statut du serveur.");
                        $("#status").css("background-color", "rgb(255, 238, 0)");
                    }
                });
            }

            // Vérifier le statut toutes les 30 secondes
            setInterval(checkServerStatus, 30000);
            
            // Vérifier le statut au chargement de la page
            checkServerStatus();
        });
    </script>
  </body>
</html>
